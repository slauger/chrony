# Managed by Puppet
# Do not modify this file directly, changes will be overwritten!

# Servers/server pool
<% if scope['chrony::pool_use'] -%>
pool <%= scope['chrony::pool_address'] %> maxsources <%= scope['chrony::pool_maxservers'] %> <% if scope['chrony::pool_iburst'] %>iburst<% end %>
<% else -%>
<% scope['chrony::servers'].each do |server| -%>
server <%= server %> iburst
<% end -%>
<% end -%>

# Driftfile location
driftfile <%= scope['chrony::driftfile'] %>
<% if scope['chrony::client_allow'] -%>

# Set which networks/hosts are allowed to connect to chrony
<% scope['chrony::client_networks'].each do |client_network| -%>
allow <%= client_network %>
<% end -%>
<% end -%>

# Look here for the admin password needed for chronyc.  The initial
# password is generated by a random process at install time.  You may
# change it if you wish.
keyfile <%= scope['chrony::keyfile'] %>

# This directive forces `chronyd' to send a message to syslog if it
# makes a system clock adjustment larger than a threshold value in seconds.
logchange 0.5

# This directive tells 'chronyd' to parse the 'adjtime' file to find out if the
# real-time clock keeps local time or UTC. It overrides the 'rtconutc' directive.
hwclockfile /etc/adjtime

# This directive enables kernel synchronisation (every 11 minutes) of the
# real-time clock. Note that it canâ€™t be used along with the 'rtcfile' directive.
rtcsync

# This directive sets the key ID used for authenticating user commands via the
# 'chronyc' program at run time.
commandkey 1

# Comment this line out to turn off logging.
log tracking measurements statistics
logdir /var/log/chrony

# Stop bad estimates upsetting machine clock.
maxupdateskew 100.0

# Dump measurements when daemon exits.
dumponexit

# Specify directory for dumping measurements.
dumpdir /var/lib/chrony

